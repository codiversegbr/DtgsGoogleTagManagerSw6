"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["dtgs-google-tag-manager-sw6"],{507:(e,t,n)=>{var i=n(6285),s=n(8553),o=n(7449);class a extends o.Z{supports(){return!0}getPluginName(){return"AddToCart"}getEvents(){return{beforeFormSubmit:this._beforeFormSubmit.bind(this)}}_beforeFormSubmit(e){if(!this.active)return;const t=e.detail;let n=null;if(t.forEach(((e,t)=>{t.endsWith("[id]")&&(n=e)})),!n)return void console.warn("[codiverse GTM] Product ID could not be fetched. Skipping.");let i=this.getProductsObjectFromFormData(t,n),s="add_to_cart";document.querySelector("body").classList.contains("is-ctl-navigation")&&(s="add_to_cart_list"),dataLayer.push({ecommerce:null}),dataLayer.push({event:s,ecommerce:{currency:t.get("dtgs-gtm-currency-code"),value:i.price*i.quantity,items:[i]}})}getProductsObjectFromFormData(e,t){let n={item_name:e.get("product-name"),item_id:e.get("dtgs-gtm-product-sku"),quantity:Number(e.get("lineItems["+t+"][quantity]"))};return null!==e.get("dtgs-gtm-product-variantname")&&Object.assign(n,{item_variant:e.get("dtgs-gtm-product-variantname")}),null!==e.get("dtgs-gtm-product-category")&&Object.assign(n,{item_category:e.get("dtgs-gtm-product-category")}),null!==e.get("dtgs-gtm-product-price")&&Object.assign(n,{price:Number(e.get("dtgs-gtm-product-price"))}),null!==e.get("brand-name")&&Object.assign(n,{item_brand:e.get("brand-name")}),n}}var r=n(4577),c=n(3206);class l extends r.Z{supports(){return!0}execute(){document.addEventListener("click",this._onRemoveFromCart.bind(this))}_onRemoveFromCart(e){if(!this.active)return;if(!e.target.closest(".line-item-remove-button"))return;const t=c.Z.querySelector(e.target.closest(".line-item-remove"),"input[name=dtgs-gtm-product-sku]");if(!t)return;const n=c.Z.querySelector(e.target.closest(".line-item-remove"),"input[name=dtgs-gtm-product-name]"),i=c.Z.querySelector(e.target.closest(".line-item-remove"),"input[name=dtgs-gtm-product-price]"),s=c.Z.querySelector(e.target.closest(".line-item-remove"),"input[name=dtgs-gtm-total-price]"),o=c.Z.querySelector(e.target.closest(".line-item-remove"),"input[name=dtgs-gtm-product-quantity]"),a=c.Z.querySelector(e.target.closest(".line-item-remove"),"input[name=dtgs-gtm-currency-code]");dataLayer.push({ecommerce:null}),dataLayer.push({event:"remove_from_cart",currency:a.value,value:Number(s.value),ecommerce:{items:[{item_id:t.value,item_name:n.value,quantity:Number(o.value),price:Number(i.value),index:0}]}})}}var u=n(7606),d=n(8736);class h extends i.Z{init(){if(this.cookieEnabledName="dtgsAllowGtmTracking",this.handleCookieChangeEvent(),this.startGoogleTagManager(),!u.Z.getItem(this.cookieEnabledName))return;this.fireCookieConsentEvent();const e=document.querySelector(".header-cart");if(e){const t=window.PluginManager.getPluginInstanceFromElement(e,"OffCanvasCart");t&&t.$emitter.subscribe("offCanvasOpened",this.onOffCanvasOpened.bind(this))}}fireCookieConsentEvent(){window.dataLayer.push({event:"cookieConsentGiven"})}fireSelectItemEvent(e){let t=e.target.closest(".card-body"),n=t.querySelector('input[name="product-name"]').value,i=t.querySelector('input[name="dtgs-gtm-product-sku"]').value;dataLayer.push({ecommerce:null}),dataLayer.push({event:"select_item",ecommerce:{item_list_name:"Category",items:[{item_id:i,item_name:n}]}})}startGoogleTagManager(){this.controllerName=window.controllerName,this.actionName=window.actionName,this.events=[],this.registerDefaultEvents(),this.handleEvents()}handleEvents(){this.events.forEach((e=>{e.supports(this.controllerName,this.actionName)&&e.execute()}))}registerDefaultEvents(){this.registerEvent(a),this.registerEvent(l),document.querySelectorAll("a.product-name, a.product-image-link, a.product-button-detail").forEach((e=>{e.addEventListener("click",this.fireSelectItemEvent)}))}registerEvent(e){this.events.push(new e)}handleCookieChangeEvent(){document.$emitter.subscribe(s.Du,this.handleCookies.bind(this))}handleCookies(e){const t=e.detail;t.hasOwnProperty(this.cookieEnabledName)&&(t[this.cookieEnabledName]?this.fireCookieConsentEvent():(this.removeCookies(),this.disableEvents()))}removeCookies(){const e=document.cookie.split(";"),t=/^(_ga|_gat_UA$|_gid)/;e.forEach((e=>{const n=e.split("=")[0].trim();n.match(t)&&u.Z.removeItem(n)}))}disableEvents(){this.events.forEach((e=>{e.disable()}))}onOffCanvasOpened(){let e=d.Z.getAdditionalProperties(),t=this.getLineItems();window.dataLayer.push({event:"view_cart",currency:e.currency,ecommerce:{items:t}})}getLineItems(){const e=c.Z.querySelector(document,".hidden-line-items-information",!1),t=c.Z.querySelectorAll(e,".hidden-line-item",!1),n=[];return t.forEach((e=>{n.push({item_id:c.Z.getDataAttribute(e,"data-dtgs-sku"),item_name:c.Z.getDataAttribute(e,"name"),quantity:c.Z.getDataAttribute(e,"quantity"),price:c.Z.getDataAttribute(e,"data-dtgs-price")})})),n}}window.PluginManager.register("GoogleTagManager",h)},8553:(e,t,n)=>{n.d(t,{Du:()=>l,UK:()=>u,ZP:()=>d});var i=n(6285),s=n(7606),o=n(2615),a=n(3637),r=n(8254),c=n(4690);const l="CookieConfiguration_Update",u="CookieConfiguration_CloseOffCanvas";class d extends i.Z{init(){this.lastState={active:[],inactive:[]},this._httpClient=new r.Z,this._registerEvents()}_registerEvents(){const{submitEvent:e,buttonOpenSelector:t,customLinkSelector:n,globalButtonAcceptAllSelector:i}=this.options;Array.from(document.querySelectorAll(t)).forEach((t=>{t.addEventListener(e,this.openOffCanvas.bind(this))})),Array.from(document.querySelectorAll(n)).forEach((t=>{t.addEventListener(e,this._handleCustomLink.bind(this))})),Array.from(document.querySelectorAll(i)).forEach((t=>{t.addEventListener(e,this._acceptAllCookiesFromCookieBar.bind(this))}))}_registerOffCanvasEvents(){const{submitEvent:e,buttonSubmitSelector:t,buttonAcceptAllSelector:n,wrapperToggleSelector:i}=this.options,o=this._getOffCanvas();if(o){const a=o.querySelector(t),r=o.querySelector(n),c=Array.from(o.querySelectorAll('input[type="checkbox"]')),l=Array.from(o.querySelectorAll(i));a&&a.addEventListener(e,this._handleSubmit.bind(this,s.Z)),r&&r.addEventListener(e,this._acceptAllCookiesFromOffCanvas.bind(this,s.Z)),c.forEach((t=>{t.addEventListener(e,this._handleCheckbox.bind(this))})),l.forEach((t=>{t.addEventListener(e,this._handleWrapperTrigger.bind(this))}))}}_handleCustomLink(e){e.preventDefault(),this.openOffCanvas()}_handleUpdateListener(e,t){const n=this._getUpdatedCookies(e,t);document.$emitter.publish(l,n)}_getUpdatedCookies(e,t){const{lastState:n}=this,i={};return e.forEach((e=>{n.inactive.includes(e)&&(i[e]=!0)})),t.forEach((e=>{n.active.includes(e)&&(i[e]=!1)})),i}openOffCanvas(e){const{offCanvasPosition:t}=this.options,n=window.router["frontend.cookie.offcanvas"];this._hideCookieBar(),o.Z.open(n,!1,this._onOffCanvasOpened.bind(this,e),t)}closeOffCanvas(e){o.Z.close(),"function"==typeof e&&e()}_onOffCanvasOpened(e){this._registerOffCanvasEvents(),this._setInitialState(),this._setInitialOffcanvasState(),PluginManager.initializePlugins(),"function"==typeof e&&e()}_hideCookieBar(){const e=PluginManager.getPluginInstances("CookiePermission");e&&e[0]&&(e[0]._hideCookieBar(),e[0]._removeBodyPadding())}_setInitialState(e=null){const t=e||this._getCookies("all"),n=[],i=[];t.forEach((({cookie:e,required:t})=>{s.Z.getItem(e)||t?n.push(e):i.push(e)})),this.lastState={active:n,inactive:i}}_setInitialOffcanvasState(){const e=this.lastState.active,t=this._getOffCanvas();e.forEach((e=>{const n=t.querySelector(`[data-cookie="${e}"]`);n.checked=!0,this._childCheckboxEvent(n)}))}_handleWrapperTrigger(e){e.preventDefault();const{entriesActiveClass:t,entriesClass:n,groupClass:i}=this.options,{target:s}=e,o=this._findParentEl(s,n,i);if(o){o.classList.contains(t)?o.classList.remove(t):o.classList.add(t)}}_handleCheckbox(e){const{parentInputClass:t}=this.options,{target:n}=e;(n.classList.contains(t)?this._parentCheckboxEvent:this._childCheckboxEvent).call(this,n)}_findParentEl(e,t,n=null){for(;e&&!e.classList.contains(n);){if(e.classList.contains(t))return e;e=e.parentElement}return null}_isChecked(e){return!!e.checked}_parentCheckboxEvent(e){const{groupClass:t}=this.options,n=this._isChecked(e),i=this._findParentEl(e,t);this._toggleWholeGroup(n,i)}_childCheckboxEvent(e){const{groupClass:t}=this.options,n=this._isChecked(e),i=this._findParentEl(e,t);this._toggleParentCheckbox(n,i)}_toggleWholeGroup(e,t){Array.from(t.querySelectorAll("input")).forEach((t=>{t.checked=e}))}_toggleParentCheckbox(e,t){const{parentInputSelector:n}=this.options,i=Array.from(t.querySelectorAll(`input:not(${n})`)),s=Array.from(t.querySelectorAll(`input:not(${n}):checked`));if(i.length>0){const e=t.querySelector(n);if(e){const t=s.length>0,n=t&&s.length!==i.length;e.checked=t,e.indeterminate=n}}}_handleSubmit(){const e=this._getCookies("active"),t=this._getCookies("inactive"),{cookiePreference:n}=this.options,i=[],o=[];t.forEach((({cookie:e})=>{o.push(e),s.Z.getItem(e)&&s.Z.removeItem(e)})),e.forEach((({cookie:e,value:t,expiration:n})=>{i.push(e),e&&t&&s.Z.setItem(e,t,n)})),s.Z.setItem(n,"1","30"),this._handleUpdateListener(i,o),this.closeOffCanvas(document.$emitter.publish(u))}acceptAllCookies(e=!1){if(!e)return this._handleAcceptAll(),void this.closeOffCanvas();c.Z.create(this.el);const t=window.router["frontend.cookie.offcanvas"];this._httpClient.get(t,(e=>{const t=(new DOMParser).parseFromString(e,"text/html");this._handleAcceptAll(t),c.Z.remove(this.el),this._hideCookieBar()}))}_acceptAllCookiesFromCookieBar(){return this.acceptAllCookies(!0)}_acceptAllCookiesFromOffCanvas(){return this.acceptAllCookies()}_handleAcceptAll(e=null){const t=this._getCookies("all",e);this._setInitialState(t);const{cookiePreference:n}=this.options;t.forEach((({cookie:e,value:t,expiration:n})=>{e&&t&&s.Z.setItem(e,t,n)})),s.Z.setItem(n,"1","30"),this._handleUpdateListener(t.map((({cookie:e})=>e)),[])}_getCookies(e="all",t=null){const{cookieSelector:n}=this.options;return t||(t=this._getOffCanvas()),Array.from(t.querySelectorAll(n)).filter((t=>{switch(e){case"all":return!0;case"active":return this._isChecked(t);case"inactive":return!this._isChecked(t);default:return!1}})).map((e=>{const{cookie:t,cookieValue:n,cookieExpiration:i,cookieRequired:s}=e.dataset;return{cookie:t,value:n,expiration:i,required:s}}))}_getOffCanvas(){const e=a.Z?a.Z.getOffCanvas():[];return!!(e&&e.length>0)&&e[0]}}var h,f,m;h=d,f="options",m={offCanvasPosition:"left",submitEvent:"click",cookiePreference:"cookie-preference",cookieSelector:"[data-cookie]",buttonOpenSelector:".js-cookie-configuration-button button",buttonSubmitSelector:".js-offcanvas-cookie-submit",buttonAcceptAllSelector:".js-offcanvas-cookie-accept-all",globalButtonAcceptAllSelector:".js-cookie-accept-all-button",wrapperToggleSelector:".offcanvas-cookie-entries span",parentInputSelector:".offcanvas-cookie-parent-input",customLinkSelector:`[href="${window.router["frontend.cookie.offcanvas"]}"]`,entriesActiveClass:"offcanvas-cookie-entries--active",entriesClass:"offcanvas-cookie-entries",groupClass:"offcanvas-cookie-group",parentInputClass:"offcanvas-cookie-parent-input"},(f=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(f))in h?Object.defineProperty(h,f,{value:m,enumerable:!0,configurable:!0,writable:!0}):h[f]=m},4577:(e,t,n)=>{function i(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:()=>s});class s{constructor(){i(this,"active",!0)}supports(e,t){return console.warn("[Google Analytics Plugin] Method 'supports' was not overridden by `"+this.constructor.name+"`. Default return set to false."),!1}execute(){console.warn("[Google Analytics Plugin] Method 'execute' was not overridden by `"+this.constructor.name+"`.")}disable(){this.active=!1}}},7449:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(4577);class s extends i.Z{execute(){const e=this.getEvents();window.PluginManager.getPluginInstances(this.getPluginName()).forEach((t=>{Object.keys(e).forEach((n=>{t.$emitter.subscribe(n,e[n])}))}))}getEvents(){console.warn("[Google Analytics Plugin] Method 'getEvents' was not overridden by `"+this.constructor.name+"`.")}getPluginName(){console.warn("[Google Analytics Plugin] Method 'getPluginName' was not overridden by `"+this.constructor.name+"`.")}}},8736:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(3206);class s{static getLineItems(){const e=i.Z.querySelector(document,".hidden-line-items-information"),t=i.Z.querySelectorAll(e,".hidden-line-item"),n=[];return t.forEach((t=>{n.push({id:i.Z.getDataAttribute(t,"id"),name:i.Z.getDataAttribute(t,"name"),quantity:i.Z.getDataAttribute(t,"quantity"),price:i.Z.getDataAttribute(t,"price"),currency:i.Z.getDataAttribute(e,"currency")})})),n}static getAdditionalProperties(){const e=i.Z.querySelector(document,".hidden-line-items-information");return{currency:i.Z.getDataAttribute(e,"currency"),shipping:i.Z.getDataAttribute(e,"shipping"),value:i.Z.getDataAttribute(e,"value"),tax:i.Z.getDataAttribute(e,"tax")}}}},2615:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(3637),s=n(8254),o=n(7906);let a=null;class r extends i.Z{static open(e=!1,t=!1,n=null,s="left",o=!0,a=i.Z.REMOVE_OFF_CANVAS_DELAY(),r=!1,c=""){if(!e)throw new Error("A url must be given!");i.r._removeExistingOffCanvas();const l=i.r._createOffCanvas(s,r,c,o);this.setContent(e,t,n,o,a),i.r._openOffcanvas(l)}static setContent(e,t,n,i,c){const l=new s.Z;super.setContent(`<div class="offcanvas-body">${o.Z.getTemplate()}</div>`,i,c),a&&a.abort();const u=e=>{super.setContent(e,i,c),"function"==typeof n&&n(e)};a=t?l.post(e,t,r.executeCallback.bind(this,u)):l.get(e,r.executeCallback.bind(this,u))}static executeCallback(e,t){"function"==typeof e&&e(t),window.PluginManager.initializePlugins()}}},3637:(e,t,n)=>{n.d(t,{Z:()=>u,r:()=>l});var i=n(9658),s=n(2005),o=n(1966);const a="offcanvas",r=350;class c{constructor(){this.$emitter=new s.Z}open(e,t,n,i,s,o,a){this._removeExistingOffCanvas();const r=this._createOffCanvas(n,o,a,i);this.setContent(e,i,s),this._openOffcanvas(r,t)}setContent(e,t,n){const i=this.getOffCanvas();i[0]&&(i[0].innerHTML=e,this._registerEvents(n))}setAdditionalClassName(e){this.getOffCanvas()[0].classList.add(e)}getOffCanvas(){return document.querySelectorAll(`.${a}`)}close(e){const t=this.getOffCanvas();o.Z.iterate(t,(e=>{bootstrap.Offcanvas.getInstance(e).hide()})),setTimeout((()=>{this.$emitter.publish("onCloseOffcanvas",{offCanvasContent:t})}),e)}goBackInHistory(){window.history.back()}exists(){return this.getOffCanvas().length>0}_openOffcanvas(e,t){c.bsOffcanvas.show(),window.history.pushState("offcanvas-open",""),"function"==typeof t&&t()}_registerEvents(e){const t=i.Z.isTouchDevice()?"touchend":"click",n=this.getOffCanvas();o.Z.iterate(n,(t=>{const i=()=>{setTimeout((()=>{t.remove(),this.$emitter.publish("onCloseOffcanvas",{offCanvasContent:n})}),e),t.removeEventListener("hide.bs.offcanvas",i)};t.addEventListener("hide.bs.offcanvas",i)})),window.addEventListener("popstate",this.close.bind(this,e),{once:!0});const s=document.querySelectorAll(".js-offcanvas-close");o.Z.iterate(s,(n=>n.addEventListener(t,this.close.bind(this,e))))}_removeExistingOffCanvas(){c.bsOffcanvas=null;const e=this.getOffCanvas();return o.Z.iterate(e,(e=>e.remove()))}_getPositionClass(e){return"left"===e?"offcanvas-start":"right"===e?"offcanvas-end":`offcanvas-${e}`}_createOffCanvas(e,t,n,i){const s=document.createElement("div");if(s.classList.add(a),s.classList.add(this._getPositionClass(e)),!0===t&&s.classList.add("is-fullwidth"),n){const e=typeof n;if("string"===e)s.classList.add(n);else{if(!Array.isArray(n))throw new Error(`The type "${e}" is not supported. Please pass an array or a string.`);n.forEach((e=>{s.classList.add(e)}))}}return document.body.appendChild(s),c.bsOffcanvas=new bootstrap.Offcanvas(s,{backdrop:!1!==i||"static"}),s}}const l=Object.freeze(new c);class u{static open(e,t=null,n="left",i=!0,s=350,o=!1,a=""){l.open(e,t,n,i,s,o,a)}static setContent(e,t=!0,n=350){l.setContent(e,t,n)}static setAdditionalClassName(e){l.setAdditionalClassName(e)}static close(e=350){l.close(e)}static exists(){return l.exists()}static getOffCanvas(){return l.getOffCanvas()}static REMOVE_OFF_CANVAS_DELAY(){return r}}}},e=>{e.O(0,["vendor-node","vendor-shared"],(()=>{return t=507,e(e.s=t);var t}));e.O()}]);